<h1>Transactions</h1>
<div class="toplinks">
  <ul>
    <li></li>
    <li><%= link_to 'Record Expense', new_transaction_path %></li>
    <li><%= link_to 'Add Income', new_transaction_path(:income => :true) %></li>
    <li><a href="#upload_transactions">Upload Transactions</a></li>
  </ul>
</div>
<div id="transactions">
  <table>
    <tr>
      <th>Date</th>
      <th>Type</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Envelope</th>
      <th>Action</th>
    </tr>
  <% @transactions.each do |t| %>
    <tr>
      <td><%= t.date %></td>
      <td></td>
      <td><%= number_to_currency(t.amount) %></td>
      <td><%= t.name %></td>
      <td><%= t.envelope_name %></td>
      <td><%= link_to_if t.amount > 0, "allocate", new_transaction_path %></td>
    </tr>
  <% end %>
</table>
<%= paginate @transactions %>
</div>

<div id="upload_transactions">
  <%= form_tag({:action => :upload}, :multipart => true, :method => :put) do %>
    <%= file_field_tag :transaction_file %>
    <%= select_tag :account_id, options_from_collection_for_select(Account.all, :id, :name) %>
    <%= submit_tag 'Upload' %>
  <% end %>
</div>
